# 객체지향의 사실과 오해



## 1장

- 객체지향은 실세계를 모방한다.
- 아쉽지만 실제로 설명하는데 적합하지 않다.

### 커피 먹을때의 사례

> 주문자 - 주문받는 사람 - 커피만드는 사람

위 사람들은 각자의 위치에서 책임을 다한다. 이처럼 객체지향에서도 역할, 책임, 협력이 중요하다. 각 구성원들은 요청/응답으로 책임을 전달하고 협력한다. 각각의 책임을 묶어서 역할이라고 한다.

커피 만드는 사람은 각자 스타일이 다른데, 이처럼 같은 '커피 만들어줘~'요청에 각자 다른 결과를 반환하는 것을 다형성이라고 한다.



## 2장

> 여기서는 이상한 나라의 엘리스를 사례로 들어 객체지향의 각 개념을 설명한다.

엘리스 객체

- 일정 상태를 가지며 변경 가능하다. (상태)
- 상태를 변경시키는 것은 엘리스 객체의 행동이다. (행동)
- 여러 엘리스가 있더라도, 진짜 나 자신은 한명이다. (식별자)

```markdown
### 굳이 getter, setter를 사용해야하는 이유
객체의 상태를 변경시킬때, 무결성을 지키기 위해서 이다. 각 메소드에 조건을 넣어 상태를 변경시킬 수 있다.
```



#### 캡슐화

객체의 상태를 잘 정리된 행동 뒤로 감추는 것을 캡슐화 인데, 이를 통해 각 객체의 행동에 대한 자율성을 준다...?



#### 상태보다는 객체의 행동에 대해 생각하자

- 객체를 설계할때, 객체가 필요한 상태에 집중하지말고, 행동을 먼저 고민하자.
- 객체가 필요한 이유는 다른 객체와 협력하기 위해서 이므로, 행동을 먼저 고민하자
- 행동은 객체가 완수해야되는 책임을 위해서 하는 것인데, 책임-주도-설계(RDD)는 객체의 행동을 생각하게 한다.

객체지향 설계는 3가지가 중요하다

1. 역할
2. 책임
3. 협력



## 3장 타입과 추상화

복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다복잡하다

복잡한것을 단순하게 바꿔주는 것이 **추상화** 이다.

> 지하철 노선도는 실제 지하철 지도를 간단하게 추상화 시킨 것이다. 이를 통해 우리는 어디서 환승해야 되는지 어떻게 가야되는지 쉽게 알 수 있다.

### 추상화

- 복잡한 것을 좀 더 명확하게 알기 위해 특정 절차나 물체를 의도적으로 생략하여 복잡도를 극복하는 방법이다.
- 사물들간의 공통점을 취하고, 차이점을 버려서 일반화 시킨다.(interface?)
- 불필요한 세부사항을 제거해서 단순하게 만든다.



예시 - 이상한 나라의 엘리스

이상한 나라의 엘리스에는 다양한 등장인물이 등장한다.

![트럼프](./images/트럼프.jpg)



#### 그룹으로 나누어 단순화 하기

클로버 병사, 신하들, 공주와 왕자, 하객, 왕, 왕비, 하트잭 등이 등장한다. 이는 트럼프라는 하나의 개념으로 단순화 시킬 수 있다.



#### 개념

공통점을 기반으로 객체들을 묶기 위한 그릇을 말한다. 실생화의 개념들은 여러가지가 있다. 자동차, 비행기, 사람, 모니터, 키보드... 별개의 사물을 묶을 수 있는 개념들이 있다.

- 심볼 : 객체의 이름 (트럼프)
- 내연 : 개념의 의미(두 손과 두 발이 네모난 몸 모서리에 달려 있는 트럼프에 대한 설명)
- 외연 : 개념에 속하는 객체들(정원사, 병사, 신하, 왕자와 공주, 왕과 왕비...)

위의 관점들을 통해 객체를 분류 할 수 있다. 분류가 곧 추상화를 의미한다.



### 타입

#### 타입은 개념이다.

타입의 목적은 데이터가 잘못 사용되는것을 막기 위해서이다. 숫자를 문자처럼, 문자를 숫자처럼 쓰지 않기 위해서

객체지향에서 객체는 새로운 타입을 생성하는것과 같다. 객체를 창조할때 가장 중요한것은 객체가 이웃하는 객체와 협력하기 위해 해야하는 행동이다. 즉, 객체가 협력을 위해 어떤 책임을 가져야하는지 부과하는 것이다.



#### 행동이 우선이다.

객체가 어떻게 행동하느냐에 따라 타입이 결정된다. 같은 행동을 한다면 같은객체로 분류될 수 있다. 객체가 가지고 있는 데이터가 아니라 행동으로 객체를 분류해야 한다. 행동은 즉 책임을 의미하기 때문이다.

캡슐화 - 외부에 행동만을 제공하고, 데이터는 행동 뒤로 감춘다.

엘리스가 트럼프라고 분류할 수 있는것은, 그들이 몸이 납작하기 때문에 바닥에 엎드릴 수 있고, 몸이 좌우로 펄럭거린다. 이러첨 그 객체의 데이터적 특징이 아닌 행동으로 객체를 분류한다.

- 이는 실세계와 객체지향사이의 차이점이라고도 할 수 있다. 실세계는 행동보다는 특성으로 사물을 분류한다. 공이 둥근 특징때문에 공이지 굴러간다고 모두 공으로 분류하지 않기 때문이다.



### 타입의 계층

객체는 행동으로 분류하고, 그 객체들의 행동을 어떻게 하는지 외부에서는 알 수 없다. 외부에서는 필요한 객체의 행동에 메시지만 전달하면 된다. 왜? 왜 행동은 추상적 이어야 하는가? 행동이 너무 구체적이면, 변화에 취약하다. 그래서 행동은 추상적으로 정하여, 객체가 변경되는 것에 대한 대비를 해야한다.



## 4장 역할, 책임, 협력



## 5장 책임과 메시지

객체는 명확한 책임이 필요하다. 객체지향의 세계는 명확한 책임을 가진 객체들이 상호협력하는 세계이다. 그래서 객체에 명확한 책임을 부과 하는 것이 중요하다.

### 자율적인 책임

객체에게 자율적인 책임을 주어야 나중에 변경에 유동적이다.

요청을 처리하기 위한 객체가 수행하는 행동을 책임이라고 한다.

시스템 설계 : 시스템의 기능을 정의하고, 책임을 나누고, 책임을 나눌 객체를 정하고, 객체간의 협력을 생각하고, 메소드를 만들고, 그 메소드가 외부 혹은 내부에 노출될것인지를 정의한다.

그래서 객체의 책임을 정의할때는 너무 구체적이면 안된다.

1. 왕 -> 증언하라

1. 왕 -> 목격한 장면을 떠올려라
2. 왕 -> 떠오르는 것을 순서대로 재구성하라
3. 왕 -> 말로 표현하라

위의 예시처럼 너무 구체적이면 객체의 자율성을 침해한다. 자율성을 침해하면 객체와 객체사이에 의존성이 높아진다. 예를들어 말이 아닌 글로 표현하는 것으로 바뀌면, 증인과 왕 모두 변경되야한다. 이는 변경에 취약한 구조라고 볼 수 있다.



#### '어떻게'가 아니라 '무엇'을

자율적인 객체는 객체가 어떻게(how)가 아니라 무엇(what)을 해야하는지 설명해야 한다.

책임이라는 말은 어떤 행동을 수행 한다는 것을 의미한다. 이 행동은 요청을 통해서 수행된다. 여기서 요청은 **메시지**라고 부른다.



## 6장 객체지도





